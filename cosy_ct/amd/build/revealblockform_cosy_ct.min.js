define(["jquery","core/ajax"],(function(l,e){var n={init:function(){l("select#id_anchor").on("change",n.selectAnchorChanged),n.lastSelAnchor=null,n.lastSelAnchorId=null,n.lastSelAnchorRef=null,n.revealurl=null,n.cmid=null,n.courseid=null,n.blockid=null},lastSelAnchor:null,lastSelAnchorId:null,lastSelAnchorRef:null,cmid:null,courseid:null,blockid:null,revealurl:null,selectAnchorChanged:function(){if(l("select#id_anchor").val()!==n.lastSelAnchor&&"-"!==l("select#id_anchor").val()){n.lastSelAnchor=l("select#id_anchor").val(),data=n.lastSelAnchor.split("#_#"),n.lastSelAnchorId=data[0],n.lastSelAnchorRef=data[1],n.cmid=l("input#id_cmid").val(),n.courseid=l("input#id_courseid").val(),n.blockid=l("input#id_blockid").val(),n.revealurl=l("input#id_urlreveal").val();var e=document.getElementById("iut_reveal_newtab_icon");e.href=n.revealurl+"#"+n.lastSelAnchorRef,e.target="_blank",e.style="cursor:pointer;";var c=document.getElementById("iut_reveal_editname_icon");c.href="/moodle/blocks/cosy_ct/anchor_visor.php?id="+n.cmid+"&courseid="+n.courseid+"&blockid="+n.blockid+"&anchorid="+n.lastSelAnchorId,c.target="_blank",c.style="cursor:pointer; color: #1177d1;",window.onbeforeunload=null}}};return n}));