define(["jquery","core/ajax"],(function(l,e){var n={init:function(){l("select#id_anchor").on("change",n.selectAnchorChanged),n.lastSelAnchor=null,n.lastSelAnchorId=null,n.lastSelAnchorRef=null,n.chapterid=null,n.colourText="#FE6847",n.cmid=null,n.courseid=null,n.blockid=null},lastSelAnchor:null,lastSelAnchorId:null,lastSelAnchorRef:null,chapterid:null,colourText:null,cmid:null,courseid:null,blockid:null,selectAnchorChanged:function(){if(l("select#id_anchor").val()!==n.lastSelAnchor&&"-"!==l("select#id_anchor").val()){if(null!==n.lastSelAnchorRef)document.getElementById(n.lastSelAnchorRef).style="";n.lastSelAnchor=l("select#id_anchor").val(),data=n.lastSelAnchor.split("#_#"),n.lastSelAnchorId=data[0],n.lastSelAnchorRef=data[1],n.cmid=l("input#id_cmid").val(),n.courseid=l("input#id_courseid").val(),n.blockid=l("input#id_blockid").val(),n.chapterid=l("input#id_chapterid").val();var e=document.getElementById("iut_page_newtab_icon");n.chapterid?e.href="view.php?id="+n.cmid+"&chapterid="+n.chapterid+"#"+n.lastSelAnchorRef:e.href="view.php?id="+n.cmid+"#"+n.lastSelAnchorRef,e.target="_blank",e.style="cursor:pointer;",document.getElementById(n.lastSelAnchorRef).style="color:"+n.colourText+"; font-style: oblique; text-decoration: underline;";var c=document.getElementById("iut_page_editname_icon");c.href="/moodle/blocks/cosy_ct/anchor_visor.php?id="+n.cmid+"&courseid="+n.courseid+"&blockid="+n.blockid+"&anchorid="+n.lastSelAnchorId,c.style="cursor:pointer; color: #1177d1;",window.onbeforeunload=null}}};return n}));